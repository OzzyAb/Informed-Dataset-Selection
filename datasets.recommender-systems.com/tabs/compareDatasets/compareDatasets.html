<div class="tab-pane fade show active" id="dataset-info-tab-pane" role="tabpanel" aria-labelledby="dataset-info-tab" tabindex="0">
    <h2>Dataset information</h2>
    <p>
        While working with recommender systems, the characteristics of your dataset heavily affect how well your model can learn,
        generalize, and personalize. This dataset comparison tool allows you to select any two datasets and compare them side-by-side
        using key metadata metrics. This comparison gives insight into data sparsity, bias risks and cold-start challenges,
        which has an impact on model design, training strategy, and final performance.
    </p>

    <div class="row mb-3">
        <div class="col">
            <label for="dataset-selection-1" class="form-label">Dataset 1</label>
            <select id="dataset-selection-1" class="form-select" aria-label="Select dataset 1"
                onchange="compareDatasets()"></select>
        </div>
        <div class="col">
            <label for="dataset-selection-2" class="form-label">Dataset 2</label>
            <select id="dataset-selection-2" class="form-select" aria-label="Select dataset 2"
                onchange="compareDatasets()"></select>
        </div>
    </div>

    <hr style="margin-top: 2rem; margin-bottom: 2rem;">

    <div class="container mt-5" style="margin-top: 0px !important; padding: 0px;">
        <table class="table table-bordered text-center" id="dataset-table" style="width:100%; border-collapse:collapse;">
            <thead class="table-light">
                <tr>
                    <th>Metadata</th>
                    <th>Dataset 1</th>
                    <th>Dataset 2</th>
                </tr>
            </thead>
            <tbody>
                <!-- Comparison -->
            </tbody>
        </table>
    </div>
</div>

<div id="user-item-ratio-info" style="position: absolute; display: none; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.2); z-index: 9999; background-color: #fcfcfc">
    <table style="
        border: 1px solid #ccc;
        background-color: white;
        padding: 0px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        font-size: 0.8rem;">
        <tr>
            <th colspan="7" style="font-weight: normal; border: 1px solid #ddd; padding: 4px 8px;">
                The user-item ratio is a proxy for interaction matrix balance. A highly imbalanced ratio either user-dominant or
                item dominant and that can impact the ability of the model to learn meaningful collaborative patterns.
                A moderate ratio facilitates sufficient interaction overlap between users and items. This helps effective co-embedding
                and minimizing both sparsity related degradation and popularity-driven concentration.
            </th>
        </tr>
        <tr>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Ratio</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Description</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Risk Level</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Cause</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Bias Risk</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Cold-Start Risk</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Remarks</th>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&lt; 0.1</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Extremely item-heavy</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Too many items with too few users</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Long-tail and exposure biases</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High (items)</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Sparse matrix, weak learning on items</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">0.1 - 0.2</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Very item-heavy</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#x1F7E1; Medium</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Items start getting ignored</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Long-tail bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#x1F7E1; Medium (items)</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Need hybrid methods to help tail</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">0.2 - 1.0</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Slightly item-heavy</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Good coverage of items and users</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Solid for CF models</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">1.0 - 2.0</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Near balanced</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Optimal learning conditions</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Minimal</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Ideal zone</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">2.0 - 5.0</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Slightly user-heavy</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#x1F7E1; Medium</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Fewer items, users converge on same content</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Popularity bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#x1F7E1; Medium (users)</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Personalization starts weakening</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">5.0 - 10.0</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Very user-heavy</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Too few items for many users</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Heavy popularity bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High (users)</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Same items over-recommended</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&gt; 10.0</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Extremely user-heavy</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Severe lack of items</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Strong popularity bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High (users)</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Low novelty, stale recommendations</td>
        </tr>
    </table>
</div>

<div id="mean-ratings-per-user-info" style="position: absolute; display: none; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.2); z-index: 9999; background-color: #fcfcfc">
    <p id="mean-ratings-per-user-info-p" style="margin: 0.3rem;">
    </p>
    <table style="
        border: 1px solid #ccc;
        padding: 0px;
        font-size: 0.8rem;">
        <tr>
            <th colspan="6" style="font-weight: normal; border: 1px solid #ddd; padding: 4px 8px;">
                A sufficient number of user interactions is critical for learning reliable preference patterns in CF systems. However,
                excessive concentration of interactions among a small subset of highly active users can introduce activity bias, which
                causes your model to overfit to those users and reducing its generalizability. Optimal performance typically happens
                when users contribute enough ratings to establish behavioral patterns without dominating the training signal.
            </th>
        </tr>
        <tr>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Range</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Risk Level</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Cause</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Bias Risk</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Cold-Start Risk</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Remarks</th>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&lt; 5</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Users don't interact enough to learn preferences</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Popularity bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High (users)</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">CF can't find similar users easily</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">5 - 20</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#x1F7E1; Medium</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Sparse signals</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Slight popularity bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#x1F7E1; Medium (users)</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Need user-side regularization</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">20 - 50</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Balanced</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Ideal zone</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">50 - 100</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#x1F7E1; Medium</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Power users dominate, skewed model</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Activity bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Need normalization</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&gt; 100</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Overfitting to active users</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">User bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low (for CF), &#128308; Fairness</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Need downweighting high-volume users</td>
        </tr>
    </table>
</div>

<div id="mean-ratings-per-item-info" style="position: absolute; display: none; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.2); z-index: 9999; background-color: #fcfcfc">
    <table style="
        border: 1px solid #ccc;
        background-color: white;
        padding: 0px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        font-size: 0.8rem;">
        <tr>
            <th colspan="6" style="font-weight: normal; border: 1px solid #ddd; padding: 4px 8px;">
                Balanced item exposure is essential for learning item representations. Items with very few interactions remain
                underrepresented, which leads to poor generalization and the cold-start problem. In contrast, items with
                excessive ratings can dominate the latent space, which introduces the popularity bias. A moderate rating range
                ensures equitable model attention across the item catalog and supports recommendation diversity.
            </th>
        </tr>
        <tr>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Range</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Risk Level</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Cause</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Bias Risk</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Cold-Start Risk</th>
            <th style="border: 1px solid #ddd; padding: 4px 8px;">Remarks</th>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&lt; 5</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Items too underexposed for learning</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Long-tail bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High (items)</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Sparse learning</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">5 - 20</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#x1F7E1; Medium</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Weak signals for most items</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Slight popularity bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#x1F7E1; Medium (items)</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Tail modeling can help</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">20 - 50</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Balanced</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Ideal zone</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">50 - 100</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#x1F7E1; Medium</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Few dominant items get most ratings</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Popularity bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128994; Low</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Dominance of head items grows over time</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&gt; 100</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Tail items get buried, head dominates</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Long-tail bias</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">&#128308; High (items)</td>
            <td style="border: 1px solid #ddd; padding: 4px 8px;">Need reranking or debiasing strategies</td>
        </tr>
    </table>
</div>
