<div class="tab-pane fade show active" id="aps-tab-pane" role="tabpanel" aria-labelledby="aps-tab" tabindex="0">
    <!-- APS Tab content begins here -->
    <h2>Algorithm Performance Space</h2>
    <p>
        Algorithm Performance Space (APS) is a tool to help you pick better, more diverse datasets for testing your
        recommender systems algorithms. Instead of selecting popular datasets blindly, APS maps datasets based on
        how different algorithms perform on them. By using this tool:
        <ul style="list-style: none; padding-left: 1rem;">
            <li style="display: flex; align-items: center; position: relative; padding-left: 1rem; margin-bottom: 0.5rem;">
                <span style="position: absolute; left: 0; width: 12px; height: 12px; background-color: #8d8d8d; border-radius: 50%;"></span>
                <span style="margin-left: 0.5rem;">You can see which datasets are very similar and might not add much new information for training and benchmarking.</span>
            </li>
            <li style="display: flex; align-items: center; position: relative; padding-left: 1rem; margin-bottom: 0.5rem;">
                <span style="position: absolute; left: 0; width: 12px; height: 12px; background-color: #8d8d8d; border-radius: 50%;"></span>
                <span style="margin-left: 0.5rem;">You can identify datasets where algorithms struggle.</span>
            </li>
            <li style="display: flex; align-items: center; position: relative; padding-left: 1rem; margin-bottom: 0.5rem;">
                <span style="position: absolute; left: 0; width: 12px; height: 12px; background-color: #8d8d8d; border-radius: 50%;"></span>
                <span style="margin-left: 0.5rem;">You can avoid spending much time on datasets where all algorithms already do well.</span>
            </li>
        </ul>
        The graph below visualizes this by reducing performance results into two dimensions using Principal Component Analysis (PCA) based on
        the evaluations of a selected performance metric such as nDCG, Hit Ratio or Recall with a K-value.
        <br style="margin-bottom: 1rem;">
        Similarity between datasets is calculated not just by their distance between them in this PCA graph, but also by the uncertainty
        in their positions, which is represented by ellipses around each point. Each ellipse demonstrates variance in X and Y for each dataset.
        In order to compare datasets similarities, <strong>Mahalanobis Distance</strong> is used, which measures how close two points
        are relative to their combined uncertainty:
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block" style="margin-top: 1rem; margin-bottom: 1rem;">
            <msup>
                <mi>d</mi>
                <mn>2</mn>
            </msup>
            <mo>=</mo>
            <mfrac>
                <msup>
                    <mrow>
                        <mo>(</mo>
                        <msub>
                            <mi>x</mi>
                            <mn>2</mn>
                        </msub>
                        <mo>-</mo>
                        <msub>
                            <mi>x</mi>
                            <mn>1</mn>
                        </msub>
                        <mo>)</mo>
                    </mrow>
                    <mn>2</mn>
                </msup>
                <mrow>
                    <msub>
                        <mi>varX</mi>
                        <mn>1</mn>
                    </msub>
                    <mo>+</mo>
                    <msub>
                        <mi>varX</mi>
                        <mn>2</mn>
                    </msub>
                </mrow>
            </mfrac>
            <mo>+</mo>
            <mfrac>
                <msup>
                    <mrow>
                        <mo>(</mo>
                        <msub>
                            <mi>y</mi>
                            <mn>2</mn>
                        </msub>
                        <mo>-</mo>
                        <msub>
                            <mi>y</mi>
                            <mn>1</mn>
                        </msub>
                        <mo>)</mo>
                    </mrow>
                    <mn>2</mn>
                </msup>
                <mrow>
                    <msub>
                        <mi>varY</mi>
                        <mn>1</mn>
                    </msub>
                    <mo>+</mo>
                    <msub>
                        <mi>varY</mi>
                        <mn>2</mn>
                    </msub>
                </mrow>
            </mfrac>
        </math>
        This distance calculation takes the uncertainty of positions into account. A smaller Mahalanobis distance means that two datasets
        behave similarly despite uncertainty. A confidence score is then calculated from this distance using an exponential decay:
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block" style="margin-top: 1rem; margin-bottom: 1rem;">
            <mi>confidence</mi>
            <mo>=</mo>
            <msup>
                <mi>e</mi>
                <mrow>
                    <mo>-</mo>
                    <mi>distance</mi>
                </mrow>
            </msup>
        </math>
        Higher confidence indicates greater similarity in algorithm performance between datasets.
    </p>

    <hr>

    <!-- Form controls to select performance metric an k value for the PCA -->
    <div class="row mb-3">
        <div class="col">
            <label for="formPerformanceMetricPca" class="form-label">Performance Metric</label>
            <select id="formPerformanceMetricPca" class="form-select updatePca" aria-label="Select performance metric">
                <option value="ndcg">nDCG</option>
                <option value="hr">Hit Ratio (HR)</option>
                <option value="recall">Recall</option>
            </select>
        </div>
        <div class="col">
            <label for="formKValuePca" class="form-label">K-Value</label>
            <select id="formKValuePca" class="form-select updatePca" aria-label="Select k-value">
                <option value="one">@1</option>
                <option value="three">@3</option>
                <option value="five">@5</option>
                <option value="ten">@10</option>
                <option value="twenty">@20</option>
            </select>
        </div>
    </div>

    <div class="accordion" id="accordionAPSAlgo" style="margin-bottom: 1rem;">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#apsAlgoNames" aria-expanded="false" aria-controls="apsAlgoNames">
                    Algorithms
                </button>
            </h2>
            <div id="apsAlgoNames" class="accordion-collapse collapse" aria-labelledby="headingOne"
                data-bs-parent="#accordionAPSAlgo">
                <div id="aps-algo" class="accordion-body" style="display: flex; flex-wrap: wrap; gap: 12px;">
                    <!-- Algorithm names -->
                </div>
            </div>
        </div>
    </div>

    <div class="accordion" id="accordionAPS">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button collapsed acc-btn-icon" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                    <span>Dataset Filter</span>
                    <span id="aps-filter-header" style="margin-left: auto;">(All selected)</span>
                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                data-bs-parent="#accordionAPS">
                <div id="aps-filter" class="accordion-body" style="display: flex; flex-wrap: wrap; gap: 12px;">
                    <!-- Dataset filter checkboxes -->
                </div>
            </div>
        </div>
    </div>

    <canvas id="aps-chart" class="my-3" style="touch-action: none; user-select: none;"></canvas>
    <div style="display: flex; flex-direction: row; justify-content: center; align-items: center; gap: 1rem;">
        <button id="aps-reset-graph-btn" type="button" class="btn btn-primary">Reset Graph</button>
        <button id="aps-export-png-btn" type="button" class="btn btn-primary">Export as PNG</button>
    </div>

    <hr style="margin-bottom: 1.5rem;">

    <div class="accordion" id="aps-dataset-similarities-container">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button collapsed acc-btn-icon" type="button" data-bs-toggle="collapse"
                    data-bs-target="#aps-dataset-similarities" aria-expanded="false" aria-controls="collapseOne"
                    style="display: flex; justify-content: space-between; width: 100%;">
                    Similarities
                </button>
            </h2>
            <div id="aps-dataset-similarities" class="accordion-collapse collapse" aria-labelledby="headingOne"
                data-bs-parent="#accordionAPS">
                <div id="aps-dataset-similarities-body" class="accordion-body" style="display: flex; flex-direction: column;">
                    <div>
                        <h5 style="font-weight: bold;">Similarity Confidence Levels:</h5>
                        <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-top: 0.5rem;">
                            <span class="badge bg-secondary">Very Low (&lt;= 0.25)</span>
                            <span class="badge bg-danger">Low (0.25 - 0.5)</span>
                            <span class="badge bg-warning text-dark">Moderate (0.5 - 0.75)</span>
                            <span class="badge bg-primary">High (0.75 - 0.9)</span>
                            <span class="badge bg-success">Very High (&gt;= 0.9)</span>
                        </div>
                    </div>
                    <div id="similar-datasets" style="margin-top: 2rem;">
                        <!-- Similar Datasets -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="accordion" id="aps-dataset-difficulties-container" style="margin-top: 1rem;">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button collapsed acc-btn-icon" type="button" data-bs-toggle="collapse"
                    data-bs-target="#aps-dataset-difficulties" aria-expanded="false" aria-controls="collapseOne"
                    style="display: flex; justify-content: space-between; width: 100%;">
                    Difficulties
                </button>
            </h2>
            <div id="aps-dataset-difficulties" class="accordion-collapse collapse" aria-labelledby="headingOne"
                data-bs-parent="#accordionAPS">
                <div id="aps-dataset-difficulties-body" class="accordion-body" style="display: flex; flex-direction: column;">
                    <div>
                        <h5 style="font-weight: bold;">Difficulty Levels:</h5>
                        <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-top: 0.5rem;">
                            <span class="badge bg-dark">Very Hard (&lt;= 0.2)</span>
                            <span class="badge bg-danger">Hard (0.2 - 0.3)</span>
                            <span class="badge bg-warning text-dark">Medium (0.3 - 0.4)</span>
                            <span class="badge bg-primary">Easy (0.4 - 0.7)</span>
                            <span class="badge bg-success">Very Easy (&gt;= 0.7)</span>
                        </div>
                    </div>
                    <div id="dataset-difficulty" style="margin-top: 2rem;">
                        <!-- Dataset Difficulties -->
                        <div><strong>Dataset D</strong></div>
                        <div class="progress" style="height: 20px;">
                            <div class="progress-bar bg-danger" role="progressbar" style="width: 85%;" aria-valuenow="85" aria-valuemin="0"
                                aria-valuemax="100">Hard</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>